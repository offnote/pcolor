/*********************************************************
 * Licensed under the MIT licenses.
 * Copyright 2015 (c) M.Belikov www.pcolor.offnote.net
 * update 2016
*********************************************************/

(function(b){b.fn.pColor=function(a){var f="ffffff e8e8e8 d1d1d1 bababa a3a3a3 8c8c8c 757575 5e5e5e 474747 303030 111111 000000 c5edfc ccdbfc cfbbfc eabcfc f2c7d9 fad1cf fbdbce fde8cd fdefcd fcfdd7 f6fad5 d9eacb 8fddfb 9eb7fc a274f9 d679fc e991b3 f7a6a1 f9b89d f8d19c fadf9c fdfcaf edf7ad c4e5a8 5dcbfa 6d93fa 7630f9 c238f9 de5b8d f57871 f5956e f6bb6a f8d16a fbfa89 e4f383 a5d77d 37b9f7 426ff9 500ee2 aa15ec d32767 f24d45 f3723f f4a63b f5c13d fbf963 dcef5c 8acb53 2d91cc 2946fa 3f0aa0 8310ad a01e4b f22f1e f3571b f39c1f f4bd22 fbff42 cfeb3a 6aaf38 2479a3 213dc8 2d0880 640c8b 80173e ce1713 c43f14 c17317 c18d1a efeb26 b5ca26 588e2e 1b5a7a 192d97 220661 4b0967 60122f 9c110e 932e0f 915511 906913 b3b11c 87981c 416922 123c50 111f65 16013f 330645 3f0c1f 680c0a 621f0a 62390c 60460d 787513 5b6513 2d4716 0d2939 0b1443 10002d 22022f 2b0715 450706 431607 432708 412f09 51500d 3e450c 1e300f".split(" "),
g="ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646 f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806 c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0".split(" "),
e=b.extend({onChange:function(){},onSelect:function(){},fill:!1,color:"",skin:"",value:!1,selectorClass:"pcolorSelector",selectorCss:!1,textMS:"\u0426\u0432\u0435\u0442\u0430 \u0442\u0435\u043c\u044b",textWEB:"\u0412\u0435\u0431-\u0446\u0432\u0435\u0442\u0430",textCom:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0446\u0432\u0435\u0442\u0430"},a||{}),h="",l="";for(a=0;a<g.length;a++)h+='<div style="border-color:#'+g[a]+";background:#"+g[a]+'" data-color="'+g[a]+'" class="colorPicker-pick"><span>&nbsp;</span></div>',
59==a&&(h+='<code class="colorPicker-separator">&nbsp;</code><span class="colorPicker-title">'+e.textCom+'</span><code class="colorPicker-separator">&nbsp;</code>');for(a=0;a<f.length;a++)l+='<div style="border-color:#'+f[a]+";background:#"+f[a]+'" data-color="'+f[a]+'" class="colorPicker-pick"><span>&nbsp;</span></div>';b(document).on("mousedown.colorPicker-box",function(a){b(a.target).parents().add(a.target).hasClass("colorPicker-box")||b(".colorPicker-box").fadeOut()});var m=function(b,c){e.fill&&
b.css("background-color","#"+c).attr("data-color",c)},n=function(b,c,d){e.value&&d&&(d="#"+d,"input"==b?c.val(d):c.text(d))},k=0;return this.each(function(a){k++;var c=b(this),d=c.attr("id");d||(d="pcolornotID-"+k,c.attr("id",d));var f=document.getElementById(d).nodeName.toLowerCase();a=c.attr("data-color")||e.color.replace(/[#]/g,"");e.selectorCss&&c.addClass(e.selectorClass);var g='<div id="colorPicker-'+d+'" class="colorPicker-box '+e.skin+'"><div id="colorPaletteTabs-'+d+'" class="colorPicker-palette-tabs"><a class="active" href="#colorTab-MS">'+
e.textMS+'</a><a href="#colorTab-WEB">'+e.textWEB+'</a></div><div id="colorPalette-'+d+'" class="colorPicker-palette"><div id="colorTab-MS-'+d+'" class="colorPicker-tab MS"><code class="colorPicker-separator">&nbsp;</code>'+h+'<br clear="all" /><code class="colorPicker-separator">&nbsp;</code></div><div id="colorTab-WEB-'+d+'" class="colorPicker-tab WEB">'+l+'<br clear="all" /></div></div><div id="colorPreview-'+d+'" class="colorPicker-preview"></div></div>';b("body").append(g);m(c,a);n(f,c,a);b("#colorPaletteTabs-"+
d+" > a").click(function(c){b("#colorPaletteTabs-"+d+" > a").removeClass("active");b("#colorPalette-"+d+" > div").hide();c=b(this);var a=c.attr("href");c.addClass("active");b(a+"-"+d).show();return!1});b("#colorTab-MS-"+d+" > div , #colorTab-WEB-"+d+" > div").hover(function(){var a=b(this),p=a.attr("data-color"),p="#"+p;b("#colorPreview-"+d).css("background",p);"function"==typeof e.onSelect&&e.onSelect.call(this,p,c);a.addClass("colorPicker-hover")},function(){b(this).removeClass("colorPicker-hover")}).click(function(a){a=
b(this).attr("data-color");c.attr("data-color",a);b("#colorPicker-"+d).hide();"function"==typeof e.onChange&&e.onChange.call(this,"#"+a,c);m(c,a);n(f,c,a)});c.click(function(a){b("div.colorPicker-box").hide();a=c.offset().top;var e=c.offset().left,f=c.height(),g=c.width(),h=b(window).width(),l=b(window).height(),m=b(window).scrollTop(),n=c.attr("data-color"),k=b("#colorPicker-"+d).width(),q=b("#colorPicker-"+d).height();k>h-(e+g)&&(e=e+g-k);q>l+m-(a+f)&&(a-=q);b("#colorTab-MS-"+d+" > div , #colorTab-WEB-"+
d+" > div").removeClass("colorPicker-select").each(function(a,d){var c=b(this),e=c.attr("data-color");n==e&&c.addClass("colorPicker-select")});b("#colorPicker-"+d).css({top:a,left:e,display:"block"}).hover(function(){},function(){b(this).hide()})})})}})(jQuery);
